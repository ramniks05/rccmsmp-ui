<div class="admin-page-container">
  <!-- Page Header -->
  <div class="page-header">
    <div class="header-content">
      <h1 class="page-title">
        <mat-icon>settings</mat-icon>
        System Settings
      </h1>
      <p class="page-subtitle">Manage Header and Footer Configuration</p>
    </div>
    <div class="header-actions">
      <button
        mat-raised-button
        color="primary"
        routerLink="/admin/home"
        class="back-btn"
      >
        <mat-icon>arrow_back</mat-icon>
        Back to Dashboard
      </button>
    </div>
  </div>

  <!-- Page Content -->
  <div class="page-content">
    <!-- Loading Spinner -->
    <div *ngIf="loading" class="loading-container">
      <mat-spinner></mat-spinner>
      <p>Loading settings...</p>
    </div>

    <!-- Settings Form -->
    <form
      [formGroup]="settingsForm"
      (ngSubmit)="saveSettings()"
      *ngIf="!loading"
    >
      <div class="form-sections">
        <!-- Header Settings Section -->
        <mat-card class="settings-card">
          <mat-card-header>
            <mat-card-title>
              <mat-icon>title</mat-icon>
              Header Settings
            </mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <div class="form-row">
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Logo URL</mat-label>
                <input
                  matInput
                  formControlName="logoUrl"
                  placeholder="/assets/images/logo.png"
                />
                <mat-hint
                  >Path to logo image (e.g., /assets/images/logo.png)</mat-hint
                >
              </mat-form-field>
            </div>

            <div class="form-row">
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Header Text *</mat-label>
                <input
                  matInput
                  formControlName="logoHeader"
                  required
                  placeholder="Revenue & Settlement Department"
                />
                <mat-error
                  *ngIf="settingsForm.get('logoHeader')?.hasError('required')"
                >
                  Header text is required
                </mat-error>
              </mat-form-field>
            </div>

            <div class="form-row">
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Subheader Text *</mat-label>
                <input
                  matInput
                  formControlName="logoSubheader"
                  required
                  placeholder="Government of Manipur"
                />
                <mat-error
                  *ngIf="
                    settingsForm.get('logoSubheader')?.hasError('required')
                  "
                >
                  Subheader text is required
                </mat-error>
              </mat-form-field>
            </div>

            <div class="form-row">
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>State Name</mat-label>
                <input
                  matInput
                  formControlName="stateName"
                  placeholder="Manipur"
                />
              </mat-form-field>
            </div>

            <div class="row">
              <div class="col-lg-6">
                <div class="form-row">
                  <mat-form-field appearance="outline" class="full-width">
                    <mat-label>Secondary Logo Url</mat-label>
                    <input
                      matInput
                      formControlName="secondaryLogoUrl"
                      placeholder="Text"
                    />
                  </mat-form-field>
                </div>
              </div>
              <div class="col-lg-3">
                <div class="form-row">
                  <mat-form-field appearance="outline" class="full-width">
                    <mat-label>Secondary Logo Header</mat-label>
                    <input
                      matInput
                      formControlName="secondaryLogoHeader"
                      placeholder="Text"
                    />
                  </mat-form-field>
                </div>
              </div>
              <div class="col-lg-3">
                <div class="form-row">
                  <mat-form-field appearance="outline" class="full-width">
                    <mat-label>Secondary Logo Subheader</mat-label>
                    <input
                      matInput
                      formControlName="secondaryLogoSubheader"
                      placeholder="Text"
                    />
                  </mat-form-field>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-lg-6">
                <div class="form-row">
                  <mat-form-field appearance="outline" class="full-width">
                    <mat-label>Tertiary Logo Url</mat-label>
                    <input
                      matInput
                      formControlName="tertiaryLogoUrl"
                      placeholder="Text"
                    />
                  </mat-form-field>
                </div>
              </div>
              <div class="col-lg-3">
                <div class="form-row">
                  <mat-form-field appearance="outline" class="full-width">
                    <mat-label>Tertiary Logo Header</mat-label>
                    <input
                      matInput
                      formControlName="tertiaryLogoHeader"
                      placeholder="Text"
                    />
                  </mat-form-field>
                </div>
              </div>
              <div class="col-lg-3">
                <div class="form-row">
                  <mat-form-field appearance="outline" class="full-width">
                    <mat-label>Tertiary Logo Subheader</mat-label>
                    <input
                      matInput
                      formControlName="tertiaryLogoSubheader"
                      placeholder="Text"
                    />
                  </mat-form-field>
                </div>
              </div>
            </div>

            <div class="form-row">
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Marquee Text</mat-label>
                <input
                  matInput
                  formControlName="marqueeText"
                  placeholder="Text"
                />
              </mat-form-field>
            </div>
          </mat-card-content>
        </mat-card>

        <!-- Website Settings Section -->
        <mat-card class="settings-card">
          <mat-card-header>
            <mat-card-title>
              <mat-icon>public</mat-icon>
              Website Settings
            </mat-card-title>
          </mat-card-header>

          <mat-card-content formArrayName="banners">
            <p class="section-hint">Configure homepage banners</p>

            <!-- Banner Inputs -->
            <div
              class="form-row banner-row"
              *ngFor="let banner of banners.controls; let i = index"
              [formGroupName]="i"
            >
              <!-- Banner Image URL -->
              <mat-form-field appearance="outline" class="forty-width mr-4">
                <mat-label>Banner Image URL {{ i + 1 }}</mat-label>
                <input
                  matInput
                  formControlName="url"
                  placeholder="/assets/images/banner{{ i + 1 }}.png"
                />
              </mat-form-field>

              <!-- Banner Header -->
              <mat-form-field appearance="outline" class="twenty-width mr-4">
                <mat-label>Banner Header</mat-label>
                <input
                  matInput
                  formControlName="header"
                  placeholder="Banner heading text"
                />
              </mat-form-field>

              <!-- Banner Sub Header -->
              <mat-form-field appearance="outline" class="twenty-width">
                <mat-label>Banner Sub Header</mat-label>
                <input
                  matInput
                  formControlName="subHeader"
                  placeholder="Banner sub heading text"
                />
              </mat-form-field>

              <!-- Remove -->
              <button
                mat-icon-button
                color="warn"
                type="button"
                (click)="removeBanner(i)"
                aria-label="Remove banner"
              >
                <mat-icon>delete</mat-icon>
              </button>
            </div>

            <!-- Add Banner Button -->
            <button
              mat-stroked-button
              color="primary"
              type="button"
              (click)="addBanner()"
            >
              <mat-icon>add</mat-icon>
              Add Banner
            </button>
          </mat-card-content>
        </mat-card>

        <!-- Footer Settings Section -->
        <mat-card class="settings-card">
          <mat-card-header>
            <mat-card-title>
              <mat-icon>description</mat-icon>
              Footer Settings
            </mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <div class="form-row">
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Footer Text</mat-label>
                <input
                  matInput
                  formControlName="footerText"
                  placeholder="Revenue & Settlement Department, Government of Manipur"
                />
              </mat-form-field>
            </div>

            <div class="form-row">
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Copyright Text</mat-label>
                <input
                  matInput
                  formControlName="footerCopyright"
                  placeholder="Â© 2024 Government of Manipur. All rights reserved."
                />
              </mat-form-field>
            </div>

            <div class="form-row">
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Address</mat-label>
                <textarea
                  matInput
                  formControlName="footerAddress"
                  rows="2"
                  placeholder="Imphal, Manipur, India"
                ></textarea>
              </mat-form-field>
            </div>

            <div class="form-row">
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Email</mat-label>
                <input
                  matInput
                  type="email"
                  formControlName="footerEmail"
                  placeholder="info@manipur.gov.in"
                />
                <mat-error
                  *ngIf="settingsForm.get('footerEmail')?.hasError('email')"
                >
                  Please enter a valid email address
                </mat-error>
              </mat-form-field>
            </div>

            <div class="form-row">
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Phone</mat-label>
                <input
                  matInput
                  formControlName="footerPhone"
                  placeholder="+91-XXX-XXXXXXX"
                />
              </mat-form-field>
            </div>

            <div class="form-row">
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Website URL</mat-label>
                <input
                  matInput
                  formControlName="footerWebsite"
                  placeholder="https://manipur.gov.in"
                />
              </mat-form-field>
            </div>
          </mat-card-content>
        </mat-card>
      </div>

      <!-- Action Buttons -->
      <div class="action-buttons">
        <button
          mat-raised-button
          type="button"
          color="accent"
          (click)="resetForm()"
          [disabled]="saving"
        >
          <mat-icon>refresh</mat-icon>
          Reset
        </button>
        <button
          mat-raised-button
          type="submit"
          color="primary"
          [disabled]="saving || settingsForm.invalid"
        >
          <mat-icon *ngIf="!saving">save</mat-icon>
          <mat-spinner
            *ngIf="saving"
            diameter="20"
            class="button-spinner"
          ></mat-spinner>
          {{ saving ? "Saving..." : "Save Settings" }}
        </button>
      </div>
    </form>
  </div>
</div>
